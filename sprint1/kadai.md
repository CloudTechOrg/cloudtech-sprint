# スプリント1：ネットワークとサーバ ハンズオン課題

## 背景

あなたは、とあるWebサービスを運営する企業で、インフラエンジニアとして働いています。

この度、新しく自社サービスとして「タスク管理ツール」をリリースすることになりました。

すでにアプリケーション開発チームが、フロントエンド、バックエンド（API）の開発、及びデータベースの設計を完了しています。

あなたはインフラエンジニアとして、これらのアプリケーションが正常に動作するインフラ環境を構築する必要があります。

## 実施手順

1. まずは要件を実現するための設計として、AWS構成図を作成しましょう。
2. 構成図に従い、実際にAWSで環境構築してみましょう。
3. 構築が終わったら、動作確認をしていきましょう。

## プロジェクト体制

| 担当 | チーム | 役割・タスク |
| :--- | :--- | :--- |
| **開発担当** | 開発チーム | ・アプリケーション開発<br>・データベース設計<br>・サーバ構築のシェルスクリプト作成 |
| **あなた** | インフラチーム | ・AWS構成図作成<br>・AWS環境構築 |
| **メンター** | 支援チーム | ・成果物のレビュー<br>・技術サポート (CloudTech Academy受講生のみ) |

## 要件

### 要件1：サーバ構成
- 3台のサーバにより構成される。それぞれ、Webサーバ、APIサーバ、DBサーバとし、EC2インスタンスを3台用意して構成する。
- EC2インスタンスのAMIはAmazon Linux 2023を使用する。
- それぞれのサーバの初期構築は、別途提示されるシェルスクリプトをEC2のユーザデータにて実行することで行う。

#### DBサーバの構築方法
- [こちら](https://github.com/CloudTechOrg/sprint1-api/blob/main/userdata/db_userdata.sh)をuserdataで実行してください
- `DB_PASSWORD`には任意のパスワードを設定してください

#### APIサーバの構築方法
- [こちら](https://github.com/CloudTechOrg/sprint1-api/blob/main/userdata/api_userdata.sh)をuserdataで実行してください
- `DB_SERVER_IP`にはDBサーバのPrivate IPアドレスを設定してください
- `DB_PASSWORD`には、DBサーバに設定したものと同じものを設定してください

#### Webサーバの構築方法
- [こちら](https://github.com/CloudTechOrg/sprint1-frontend/blob/main/userdata/web_userdata.sh)をuserdataで実行してください
- `API_SERVER_IP`にはAPIサーバのPrivate IPアドレスを設定してください

### 要件2：アクセス制御
- Webサーバはインターネットからの80ポート通信を許可する
- APIサーバはWebサーバからの8080ポート通信のみ許可する（インターネットからの通信は拒否）
- DBサーバはAPIサーバからの3306ポート通信のみ許可する（直接のインバウンドは拒否）
- DBサーバ及びAPIサーバは、ソフトウェアのインストールのために、アウトバウンド通信およびその戻りの通信のみ許可する

### 要件3：踏み台サーバ
* 3台のサーバをメンテナンスするために、踏み台サーバを用意する
* 3台のサーバ（Web, API, DB）は踏み台サーバからのssh接続を許可する

### 要件4：IPアドレスの固定化
* Webサーバは、インスタンス再起動によりパブリックIPアドレスが変更されないようにする（Elastic IPを使用）

## ヒント
- EC2のインスタンスタイプは `t2.micro` を使用すると、無料利用枠の対象となります。
